# QLearning
Q学习算法解决回合式任务
## 1. 问题描述
假设一幢建筑里面有5个房间，房间之间通过门相连（如图1所示）。将这五个房间按照从0至4进行编号，且建筑的外围可认为是一个大的房间，编号为5。将机器人置于2号房间，利用Q学习算法获得一条使机器人从该房间撤离到建筑物外围的最优路径。  

![image](https://github.com/user-attachments/assets/b304dc08-0b02-46c9-904d-a4555507fab7) 

## 2. 问题分析
### 2.1 符号系统
$s$：描述环境的状态  
$s'$：下一个状态  
$a$：动作  
$\pi(a|s)$：策略  
$r(s,a,s')$：奖励  
$\tau$：决策轨迹  
$G(\tau)$：总回报  
$T$：决策回合  
$\alpha$：学习率
$Q(s,a)$：状态动作值函数  
### 2.2 环境处理
本次实验采用了一个简单的建筑环境，由6个房间构成，其中0至4为内部房间，5为建筑外围。将房间结构转化为图结构（如图2所示），利于机器表示。  
![image](https://github.com/user-attachments/assets/50438ad3-93fa-4630-85e0-cab162b37614)  
```python
# 定义房间连接关系
graph = {
    0: [4],
    1: [3, 5],
    2: [3],
    3: [1, 2, 4],
    4: [0, 3, 5],
    5: []  # 目标房间5没有通往其他房间的出口
}
```
### 2.3 问题求解
Q学习是强化学习的方法之一，因为策略和状态转移都有一定的随机性，所以每次试验得到的轨迹是一个随机序列，其收获的总回报也不一样。强化学习的目标是学习到一个策略序列来最大化期望回报$G(\tau)$在本题中即找到一条能够到达外围获得最大奖赏的策略。  
因为环境中存在终止状态，当机器人撤离房间时任务结束。即此次任务的决策次数$T$为有限次，目标函数为：  
$$\underset {\tau}{arg max}G(\tau) = \sum_{\tau=0}^{T-1}r_{\tau+1}$$
